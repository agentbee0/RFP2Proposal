---
name: generate-proposal
description: >
  Generates a complete proposal from an uploaded RFP document. Analyzes the RFP,
  loads org knowledge, generates all 10 sections with smart placeholders, builds
  compliance checklist, and optionally exports to .docx.
argument-hint: Upload or paste an RFP document
---

# /generate-proposal — Full Proposal Generation Pipeline

**Description**: End-to-end proposal generation. Reads an RFP, extracts requirements, loads your org knowledge, and generates a complete 10-section proposal with smart placeholders and a compliance checklist.

**Argument**: RFP document (PDF upload, pasted text, or file path)

## Core Workflow

### Step 1: RFP Intake & Validation

- Accept the RFP via file upload (PDF, Word), pasted text, or file path
- Validate it appears to be an RFP, RFI, or RFQ
- If 50+ pages, inform the user and confirm before full analysis
- If multiple documents (base RFP + amendments), process amendments last as overrides

### Step 2: Deep RFP Analysis

Using the rfp-analysis skill, extract structured information across all 12 categories:
1. Project Overview
2. Scope of Work
3. Technical Requirements
4. Timeline
5. Budget Signals
6. Evaluation Criteria
7. Compliance Requirements
8. Submission Requirements
9. Personnel Requirements
10. Past Performance Requirements
11. Pain Points
12. Incumbent Signals

Also detect industry-specific regulatory frameworks using the industry-compliance skill.

**Present extraction summary to user.** Ask them to:
- Confirm or correct key details (client name, project name, your company's role)
- Flag any extraction errors
- Add context not in the RFP (e.g., "we have an existing relationship with this client")

### Step 3: Org Knowledge Loading

Read org-knowledge YAML files from the `org-knowledge/` directory:
- `company-profile.yaml` → Cover letter, executive summary
- `capabilities.yaml` → Technical approach
- `methodology.yaml` → Management approach
- `case-studies.yaml` → Past performance
- `team-bios.yaml` → Staffing plan
- `pricing-templates.yaml` → Pricing summary
- `legal-boilerplate.yaml` → T&C, appendices
- `differentiators.yaml` → Win themes across all sections

Report which files were found and their completeness. For missing files, note that those sections will have more placeholders.

### Step 4: Section-by-Section Generation

Generate each of the 10 proposal sections sequentially, using the proposal-writing skill framework:

1. **Cover Letter** — From company profile + RFP solicitation details
2. **Executive Summary** — Client problem + value proposition + differentiators
3. **Understanding of Requirements** — RFP scope rewritten in your voice
4. **Technical Approach** — Solution design based on RFP technical requirements + capabilities
5. **Management Approach** — Methodology from org knowledge, customized for RFP
6. **Staffing Plan** — Team structure based on RFP personnel requirements + team bios
7. **Past Performance** — Case studies matched by industry/technology relevance tags
8. **Pricing Summary** — Structure and format (with REQUIRED placeholders for all amounts)
9. **Compliance Matrix** — Generated by compliance-mapping skill
10. **Appendices** — Structured list with placeholders

For each section:
- Integrate relevant org-knowledge data
- Apply win themes from differentiators
- Insert smart placeholders classified by the placeholder-classification skill
- Add industry compliance language where applicable

Show progress after completing each section.

### Step 5: Compliance Checklist

Using the compliance-mapping skill:
- Generate the Content Compliance Matrix (requirement → proposal section → status)
- Generate the Submission Formatting Checklist
- Identify compliance gaps and flag critical items
- Cross-check placeholders against compliance requirements and escalate as needed

### Step 6: Assembly & Summary

Present the complete proposal as formatted markdown with:

1. **Full proposal text** — All 10 sections with placeholders visually marked:
   - `[REQUIRED: ...]` for must-fill items
   - `[SUGGESTED: ...]` for should-fill items
   - `[OPTIONAL: ...]` for nice-to-have items

2. **Placeholder Summary Report**:
   ```
   REQUIRED:  X items — Must be filled before submission
   SUGGESTED: Y items — Should be filled for a stronger proposal
   OPTIONAL:  Z items — Nice-to-have enhancements
   ```

3. **Compliance Status**:
   - COMPLIANT: X requirements
   - PARTIAL: Y requirements (placeholders to fill)
   - NON-COMPLIANT: Z requirements (gaps to address)

4. **Export offers**:
   - "Would you like to export this proposal to .docx? Run `/export-docx` or confirm here."
   - "Would you like to generate a traceability matrix (.xlsx) mapping RFP sections to proposal sections? Run `/export-matrix` or confirm here."

If user confirms .docx export, call the `generate_docx` tool from the docx-generator MCP server with the structured proposal data.

If user confirms traceability matrix export, call the `generate_traceability_matrix` tool with the RFP-to-proposal section mapping data.

## Post-Generation

After the proposal is generated, the user can:
- Ask to **regenerate any section** with different emphasis or additional context
- Ask to **add/remove sections** based on RFP requirements
- Run `/compliance-checklist` to get just the compliance artifacts
- Run `/export-docx` to export to Word at any time
- Run `/export-matrix` to generate a traceability matrix for reviewer cross-referencing
- Edit the proposal text directly and then export

## Error Handling

- **Missing org-knowledge directory**: Generate proposal with all REQUIRED/SUGGESTED placeholders and note that running `/setup-org` first would reduce placeholder count
- **Unreadable RFP**: If the PDF cannot be parsed (scanned image without OCR), suggest re-uploading a text-based PDF or pasting the content
- **Very long RFP**: Use the chunked analysis strategy from the rfp-analysis skill
- **No evaluation criteria found**: Generate a balanced proposal without weight-based optimization and flag this as a gap
